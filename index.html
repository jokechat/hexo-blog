<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"jokechat.cn","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="技术,资讯">
<meta property="og:type" content="website">
<meta property="og:title" content="jokechat">
<meta property="og:url" content="https://jokechat.cn/index.html">
<meta property="og:site_name" content="jokechat">
<meta property="og:description" content="技术,资讯">
<meta property="og:locale">
<meta property="article:author" content="jokechat">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://jokechat.cn/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>jokechat</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="jokechat" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">jokechat</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">人丑需要多读书</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2023/11/16/snowflake/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/11/16/snowflake/" class="post-title-link" itemprop="url">雪花算法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-11-16 10:27:41 / Modified: 12:56:11" itemprop="dateCreated datePublished" datetime="2023-11-16T10:27:41+08:00">2023-11-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h2><blockquote>
<p>雪花算法（Snowflake）是一种生成分布式全局唯一ID的算法，生成的ID称为Snowflake IDs或snowflakes。这种算法由Twitter创建，并用于推文的ID。Discord和Instagram等其他公司采用了修改后的版本。</p>
</blockquote>
<h2 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h2><p>一个Snowflake ID有64位。前41位是时间戳，表示了自选定的时期以来的毫秒数。 接下来的10位代表计算机ID，防止冲突。 其余12位代表每台机器上生成ID的序列号，这允许在同一毫秒内创建多个Snowflake ID。最后以十进制将数字序列化。</p>
<p>SnowflakeID基于时间生成，故可以按时间排序。 此外，一个ID的生成时间可以由其自身推断出来，反之亦然。该特性可以用于按时间筛选ID，以及与之联系的对象。</p>
<p><img src="/images/snowflake.jpg" alt="64位"></p>
<h2 id="范例"><a href="#范例" class="headerlink" title="范例"></a>范例</h2><p>2022年六月由@Wikipedia所发的一条推文的雪花ID是1541815603606036480。这个数字被转换成二进制就是0 0101 0101 1001 0110 1000 0100 0111 1101 1000 1000|01 0111 1010|0000 0000 0000，其中以竖线分隔成三个部分。</p>
<p>64位的二进制所示</p>
<ul>
<li>最高位表示符号位</li>
<li>后面的41bit是产生该ID的unix毫秒时间戳</li>
<li>10bit是机器编号,最多可以部署在 2^8 = 1024 机器上</li>
<li>12bit 序列号,同一毫秒最多可以产生 2^12 = 4096 个序列号</li>
</ul>
<h2 id="算法实现思路"><a href="#算法实现思路" class="headerlink" title="算法实现思路"></a>算法实现思路</h2><p>时间戳左移22位,机器编号左移12位,序列号不动,三者按位或运算,得到一个64位二进制,再转成10进制,就是雪花ID</p>
<p>反之,根据雪花ID可以反推导出机器ID,时间戳,序列号</p>
<p>41位时间戳2^41/(1000<em>3600</em>24*365) ≈ 69.73057年,引入 epoch基准时间,是为了能是雪花ID能使用的时间更长一点,41位时间戳按照unix时间,最多只能到2039-09-07 23:47:35</p>
<p><img src="/images/%E4%BA%8C%E8%BF%9B%E5%88%B6%E4%BD%8D%E8%BF%90%E7%AE%97.webp" alt="位运算"></p>
<h2 id="省流不看系列"><a href="#省流不看系列" class="headerlink" title="省流不看系列"></a>省流不看系列</h2><p><a href="https://github.com/jokechat/guid" target="_blank" rel="noopener">github jokechat/guid</a><br><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run --rm -p <span class="number">8080</span>:<span class="number">80</span> jokechat/guid:v1<span class="number">.0</span><span class="number">.3</span> </span><br><span class="line">curl <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">8080</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"code"</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">"msg"</span>: <span class="string">"success"</span>,</span><br><span class="line">  <span class="attr">"data"</span>: &#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">645124828453408800</span>,</span><br><span class="line">    <span class="attr">"workId"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"base32"</span>: <span class="string">"13pv378bo0800"</span>,</span><br><span class="line">    <span class="attr">"time"</span>: <span class="string">"2023-11-16T04:55:44.943Z"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><h3 id="type-go"><a href="#type-go" class="headerlink" title="type.go"></a>type.go</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> snowflake</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"time"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Option <span class="keyword">interface</span> &#123;</span><br><span class="line">	apply(*Worker)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> OptionFunc <span class="function"><span class="keyword">func</span><span class="params">(*Worker)</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(o OptionFunc)</span> <span class="title">apply</span><span class="params">(worker *Worker)</span></span> &#123;</span><br><span class="line">	o(worker)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WithEpoch</span><span class="params">(epoch time.Time)</span> <span class="title">OptionFunc</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(worker *Worker)</span></span> &#123;</span><br><span class="line">		worker.epoch = epoch</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">WithWorkerId</span><span class="params">(workerId <span class="keyword">int64</span>)</span> <span class="title">OptionFunc</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">(worker *Worker)</span></span> &#123;</span><br><span class="line">		worker.workerId = workerId</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="snowflake-go"><a href="#snowflake-go" class="headerlink" title="snowflake.go"></a>snowflake.go</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> snowflake</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"errors"</span></span><br><span class="line">	<span class="string">"fmt"</span></span><br><span class="line">	<span class="string">"sync"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	workerBits <span class="keyword">uint8</span> = <span class="number">10</span></span><br><span class="line">	workerMax  <span class="keyword">int64</span> = <span class="number">-1</span> ^ (<span class="number">-1</span> &lt;&lt; workerBits)</span><br><span class="line"></span><br><span class="line">	stepBits <span class="keyword">uint8</span> = <span class="number">12</span></span><br><span class="line">	stepMax  <span class="keyword">int64</span> = <span class="number">-1</span> ^ (<span class="number">-1</span> &lt;&lt; stepBits)</span><br><span class="line"></span><br><span class="line">	workerShift <span class="keyword">uint8</span> = stepBits</span><br><span class="line">	timeShift   <span class="keyword">uint8</span> = workerBits + stepBits</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Worker <span class="keyword">struct</span> &#123;</span><br><span class="line">	mu sync.Mutex</span><br><span class="line"></span><br><span class="line">	timestamp <span class="keyword">int64</span>     <span class="comment">// 记录时间戳</span></span><br><span class="line">	workerId  <span class="keyword">int64</span>     <span class="comment">// 当前工作节点ID</span></span><br><span class="line">	step      <span class="keyword">int64</span>     <span class="comment">// 当前毫秒已经生成的id序列号(从0开始累加) 1毫秒内最多生成4096个ID</span></span><br><span class="line">	epoch     time.Time <span class="comment">// 开始运行时间</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewWorkerWithOpts</span><span class="params">(opts ...Option)</span> <span class="params">(*Worker, error)</span></span> &#123;</span><br><span class="line">	w := &amp;Worker&#123;&#125;</span><br><span class="line">	<span class="keyword">for</span> _, opt := <span class="keyword">range</span> opts &#123;</span><br><span class="line">		opt.apply(w)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> w.epoch.IsZero() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, errors.New(<span class="string">"epoch is required"</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> w.workerId &lt; <span class="number">0</span> || w.workerId &gt; workerMax &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, errors.New(fmt.Sprintf(<span class="string">"worker ID must be in [0,%d]"</span>, workerMax))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> w, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(w *Worker)</span> <span class="title">Next</span><span class="params">()</span> <span class="title">ID</span></span> &#123;</span><br><span class="line">	w.mu.Lock()</span><br><span class="line">	<span class="keyword">defer</span> w.mu.Unlock()</span><br><span class="line">	now := time.Now().UnixMilli()</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 处理时钟回拨问题或处于同一毫秒 ntp 时间变化</span></span><br><span class="line">	<span class="keyword">if</span> now &lt; w.timestamp &#123;</span><br><span class="line">		now = w.timestamp + <span class="number">1</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> now == w.timestamp &#123;</span><br><span class="line">		w.step = (w.step + <span class="number">1</span>) &amp; stepMax</span><br><span class="line">		<span class="keyword">if</span> w.step == <span class="number">0</span> &#123; <span class="comment">// 当前毫秒生成的ID已超上限,等待下一毫秒</span></span><br><span class="line">			<span class="keyword">for</span> now &lt;= w.timestamp &#123;</span><br><span class="line">				now = time.Now().UnixMilli()</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		w.step = <span class="number">0</span></span><br><span class="line">		<span class="comment">// todo 持久化存储当前时间,文件或者redis</span></span><br><span class="line">	&#125;</span><br><span class="line">	w.timestamp = now</span><br><span class="line">	id := (now-w.epoch.UnixMilli())&lt;&lt;timeShift | (w.workerId &lt;&lt; workerShift) | w.step</span><br><span class="line">	<span class="keyword">return</span> ID(id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="id-go"><a href="#id-go" class="headerlink" title="id.go"></a>id.go</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> snowflake</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">"bytes"</span></span><br><span class="line">	<span class="string">"encoding/base32"</span></span><br><span class="line">	<span class="string">"encoding/binary"</span></span><br><span class="line">	<span class="string">"strconv"</span></span><br><span class="line">	<span class="string">"strings"</span></span><br><span class="line">	<span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ID <span class="keyword">uint64</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i ID)</span> <span class="title">Uint64</span><span class="params">()</span> <span class="title">uint64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">uint64</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i ID)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> strconv.FormatUint(<span class="keyword">uint64</span>(i), <span class="number">10</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i ID)</span> <span class="title">Base32</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	bytesBuffer := bytes.NewBuffer([]<span class="keyword">byte</span>&#123;&#125;)</span><br><span class="line">	binary.Write(bytesBuffer, binary.BigEndian, i)</span><br><span class="line">	<span class="keyword">return</span> base32.HexEncoding.WithPadding(base32.NoPadding).EncodeToString(bytesBuffer.Bytes())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i ID)</span> <span class="title">Base32Lower</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> strings.ToLower(i.Base32())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i ID)</span> <span class="title">UnixMilli</span><span class="params">(epoch time.Time)</span> <span class="title">int64</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> epoch.UnixMilli() + <span class="keyword">int64</span>(i.Uint64()&gt;&gt;timeShift)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i ID)</span> <span class="title">WorkId</span><span class="params">()</span> <span class="title">uint64</span></span> &#123;</span><br><span class="line">	d := i.Uint64() &gt;&gt; workerShift &amp; <span class="keyword">uint64</span>(workerMax)</span><br><span class="line">	<span class="keyword">return</span> d</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i ID)</span> <span class="title">Step</span><span class="params">()</span> <span class="title">uint64</span></span> &#123;</span><br><span class="line">	d := i.Uint64() &amp; <span class="keyword">uint64</span>(stepMax)</span><br><span class="line">	<span class="keyword">return</span> d</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(i ID)</span> <span class="title">Time</span><span class="params">(epoch time.Time)</span> <span class="title">time</span>.<span class="title">Time</span></span> &#123;</span><br><span class="line">	<span class="keyword">return</span> time.UnixMilli(i.UnixMilli(epoch))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    epoch := time.Date(<span class="number">2019</span>, time.January, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, time.Local)</span><br><span class="line">    w, _ := NewWorkerWithOpts(</span><br><span class="line">        WithEpoch(epoch),</span><br><span class="line">        WithWorkerId(<span class="number">1</span>),</span><br><span class="line">    )</span><br><span class="line">    id := w.Next()</span><br><span class="line">    spew.Dump(id.Uint64())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a href="https://zh.wikipedia.org/zh-hans/%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95#cite_ref-7" target="_blank" rel="noopener">维基百科  雪花算法</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2018/03/13/vim-tutorial/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/13/vim-tutorial/" class="post-title-link" itemprop="url">一起来学vim 😂</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-13 17:06:31" itemprop="dateCreated datePublished" datetime="2018-03-13T17:06:31+08:00">2018-03-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-14 00:19:58" itemprop="dateModified" datetime="2021-11-14T00:19:58+08:00">2021-11-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="vim-tutorial"><a href="#vim-tutorial" class="headerlink" title="vim-tutorial"></a>vim-tutorial</h1><p>vim tutorial</p>
<h2 id="整理资料来源"><a href="#整理资料来源" class="headerlink" title="整理资料来源"></a>整理资料来源</h2><blockquote>
<p>本资料来自 <a href="https://github.com/jaywcjlove/vim-web" target="_blank" rel="noopener">vim-web</a>     <a href="http://www.jianshu.com/p/a361ce8c97bc" target="_blank" rel="noopener">一起来说vim语</a><br>整理学习 jokechat<br>理解此部分需要你已经理解vim的几种常用工作模式(正常模式,插入模式,命令模式等)</p>
</blockquote>
<h3 id="动词"><a href="#动词" class="headerlink" title="动词"></a>动词</h3><p>  动词代表了我们打算对文本进行什么样的操作.例如:<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">d # 表示delete</span><br><span class="line">r # 表示替换replace</span><br><span class="line">c # 表示表示change</span><br><span class="line">y # 表示复制yank</span><br><span class="line">v # 表示选取visual select</span><br></pre></td></tr></table></figure></p>
<h3 id="名词"><a href="#名词" class="headerlink" title="名词"></a>名词</h3><p>  名词代表了我们即将处理的文本.vim中有一个术语对象叫做 text object (文本对象) ,示例如下:<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">w # 表示一个单词word</span><br><span class="line">s # 表示一个句子sentence</span><br><span class="line">p # 表示一个段落paragraph</span><br><span class="line">t # 表示一个html标签tag</span><br><span class="line">引号或者各种括号所包含文本称为一个文本块</span><br></pre></td></tr></table></figure></p>
<h3 id="介词"><a href="#介词" class="headerlink" title="介词"></a>介词</h3><p>  介词界定了待编辑文本的范围或者位置<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">i # 表示在...之内 inside</span><br><span class="line">a # 表示环绕...around</span><br><span class="line">t # 表示到...位置钱 to</span><br><span class="line">f # 表示到...位置上 forward</span><br></pre></td></tr></table></figure></p>
<h3 id="数词"><a href="#数词" class="headerlink" title="数词"></a>数词</h3><p>  数字指定了待编辑文本对象的数量,从这个角度而言,数词也可以看做一种介词.引入介词之后,文本编辑命令的语法就升级成了下面样子:<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">动词 介词/数词 名词</span><br></pre></td></tr></table></figure></p>
<p>  下面是几个例子:<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c3w # 修改三个单词 change three words</span><br><span class="line">d2w # 删除两个单词 delete two words</span><br></pre></td></tr></table></figure></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/03/13/vim-tutorial/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2018/03/05/dynamic-nginx-block-ip-with-lua-and-redis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/05/dynamic-nginx-block-ip-with-lua-and-redis/" class="post-title-link" itemprop="url">dynamic-nginx-block-ip-with-lua-and-redis</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-05 14:09:41" itemprop="dateCreated datePublished" datetime="2018-03-05T14:09:41+08:00">2018-03-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-13 23:22:26" itemprop="dateModified" datetime="2021-11-13T23:22:26+08:00">2021-11-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>占坑  TODO </p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2018/03/05/run-background-task-by-php-resque/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/05/run-background-task-by-php-resque/" class="post-title-link" itemprop="url">轻量级消息队列php-resque使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-05 14:04:40" itemprop="dateCreated datePublished" datetime="2018-03-05T14:04:40+08:00">2018-03-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-13 23:22:26" itemprop="dateModified" datetime="2021-11-13T23:22:26+08:00">2021-11-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>因实际项目需求,需要一些在后台长时间运行一些比较耗时的任务,e.g:邮件,app推送消息,报表生成..,寻了几种方案<a href="https://www.swoole.com/" target="_blank" rel="noopener">swoole</a>,<a href="https://github.com/chrisboulton/php-resque" target="_blank" rel="noopener">php-resque</a>,<a href="http://www.workerman.net/" target="_blank" rel="noopener">workman</a>,最终选择了<code>php-resque</code>,比较喜欢Ta的设计简洁清晰,足够轻量,能满足目前的大部分需求</p>
</blockquote>
<h1 id="设计思想"><a href="#设计思想" class="headerlink" title="设计思想"></a>设计思想</h1><h2 id="导读"><a href="#导读" class="headerlink" title="导读"></a>导读</h2><p>  <code>php-resque</code> 的设计思想来源于 <code>Ruby</code> 的项目 <a href="https://github.com/resque/resque" target="_blank" rel="noopener">resque</a>,<a href="https://github.com/resque/resque/wiki/Alternate-Implementations" target="_blank" rel="noopener">这是各种语言实现版本</a>,更多文档请查阅官方文档</p>
<h2 id="设计思路-amp-角色划分"><a href="#设计思路-amp-角色划分" class="headerlink" title="设计思路&amp;角色划分"></a>设计思路&amp;角色划分</h2><h3 id="Worker-执行者"><a href="#Worker-执行者" class="headerlink" title="Worker 执行者"></a><code>Worker</code> 执行者</h3><p>  负责将<code>redis</code> 队列中的 <code>Job</code>取出,并调用执行指定的 <code>Job(Class)</code>,同时负责维护 <code>Job</code> 状态;<br>  一个<code>Worker</code>可以处理多个队列,可以开启多个<code>worker</code>加快处理速度</p>
<h3 id="Queue-队列"><a href="#Queue-队列" class="headerlink" title="Queue 队列"></a><code>Queue</code> 队列</h3><p>  队列通过 <code>redis</code> 队列实现,</p>
<h3 id="Job-任务"><a href="#Job-任务" class="headerlink" title="Job 任务"></a><code>Job</code> 任务</h3><p>  一个<code>Job</code>就是一个需要在后台需要执行的任务,在<code>php-resque</code>的实现中,一个<code>Class</code>就是一个<code>Job</code></p>
<h2 id="使用基本流程"><a href="#使用基本流程" class="headerlink" title="使用基本流程"></a><code>使用基本流程</code></h2><h3 id="0x00-将一个后台任务编写为一个独立的Class，这个Class就是一个Job。"><a href="#0x00-将一个后台任务编写为一个独立的Class，这个Class就是一个Job。" class="headerlink" title="0x00  将一个后台任务编写为一个独立的Class，这个Class就是一个Job。"></a><code>0x00</code>  将一个后台任务编写为一个独立的<code>Class</code>，这个Class就是一个<code>Job</code>。</h3><h3 id="0x01-在需要使用后台程序的地方，系统将Job-Class的名称以及所需参数放入队列。"><a href="#0x01-在需要使用后台程序的地方，系统将Job-Class的名称以及所需参数放入队列。" class="headerlink" title="0x01  在需要使用后台程序的地方，系统将Job Class的名称以及所需参数放入队列。"></a><code>0x01</code>  在需要使用后台程序的地方，系统将<code>Job Class</code>的名称以及所需参数放入队列。</h3><h3 id="0x02-以命令行方式开启一个Worker，并通过参数指定Worker所需要处理的队列。"><a href="#0x02-以命令行方式开启一个Worker，并通过参数指定Worker所需要处理的队列。" class="headerlink" title="0x02  以命令行方式开启一个Worker，并通过参数指定Worker所需要处理的队列。"></a><code>0x02</code>  以命令行方式开启一个<code>Worker</code>，并通过参数指定Worker所需要处理的队列。</h3><h3 id="0x03-Worker作为守护进程运行，并且定时检查队列。"><a href="#0x03-Worker作为守护进程运行，并且定时检查队列。" class="headerlink" title="0x03  Worker作为守护进程运行，并且定时检查队列。"></a><code>0x03</code>  Worker作为守护进程运行，并且定时检查队列。</h3><h3 id="0x04-当队列中有Job时，Worker取出Job并运行，即实例化Job-Class并执行Class中的方法。"><a href="#0x04-当队列中有Job时，Worker取出Job并运行，即实例化Job-Class并执行Class中的方法。" class="headerlink" title="0x04  当队列中有Job时，Worker取出Job并运行，即实例化Job Class并执行Class中的方法。"></a><code>0x04</code>  当队列中有<code>Job</code>时，<code>Worker</code>取出<code>Job</code>并运行，即实例化<code>Job Class</code>并执行<code>Class</code>中的方法。</h3><h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><h3 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h3><h3 id="php"><a href="#php" class="headerlink" title="php"></a>php</h3><h1 id="使用-TODO"><a href="#使用-TODO" class="headerlink" title="使用 TODO"></a>使用 <code>TODO</code></h1><h2 id="Job相关"><a href="#Job相关" class="headerlink" title="Job相关"></a>Job相关</h2><h3 id="编写Job"><a href="#编写Job" class="headerlink" title="编写Job"></a>编写Job</h3><h3 id="将Job插入队列"><a href="#将Job插入队列" class="headerlink" title="将Job插入队列"></a>将Job插入队列</h3><h3 id="Job状态查看"><a href="#Job状态查看" class="headerlink" title="Job状态查看"></a>Job状态查看</h3><h2 id="Worker相关"><a href="#Worker相关" class="headerlink" title="Worker相关"></a>Worker相关</h2><h3 id="启动-重启-停止"><a href="#启动-重启-停止" class="headerlink" title="启动,重启,停止"></a>启动,重启,停止</h3><h3 id="日志收集"><a href="#日志收集" class="headerlink" title="日志收集"></a>日志收集</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2018/02/20/some-cli-tools/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/20/some-cli-tools/" class="post-title-link" itemprop="url">自用的一些命令行工具</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-20 09:51:58" itemprop="dateCreated datePublished" datetime="2018-02-20T09:51:58+08:00">2018-02-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-13 23:22:26" itemprop="dateModified" datetime="2021-11-13T23:22:26+08:00">2021-11-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%9A%8F%E7%AC%94/" itemprop="url" rel="index"><span itemprop="name">随笔</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>工欲善其事必先利其器</p>
</blockquote>
<h1 id="brew"><a href="#brew" class="headerlink" title="brew"></a><a href="https://brew.sh/" target="_blank" rel="noopener">brew</a></h1><p>brew 又叫Homebrew，是Mac OSX上的软件包管理工具，能在Mac中方便的安装软件或者卸载软件， 只需要一个命令， 非常方便</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装命令</span></span><br><span class="line">/usr/bin/ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure>
<h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew search xx</span><br></pre></td></tr></table></figure>
<h2 id="安装列表"><a href="#安装列表" class="headerlink" title="安装列表"></a>安装列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew list</span><br></pre></td></tr></table></figure>
<h2 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services [-v|--verbose] [list | run | start | stop | restart | cleanup] [...]</span><br></pre></td></tr></table></figure>
<h2 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew uninstall, rm, remove [--force] [--ignore-dependencies] formula:</span><br></pre></td></tr></table></figure>
<h1 id="oh-my-zsh"><a href="#oh-my-zsh" class="headerlink" title="oh my zsh"></a><a href="https://github.com/robbyrussell/oh-my-zsh" target="_blank" rel="noopener">oh my zsh</a></h1><p>是最为流行的 zsh 配置文件，提供了大量的主题和插件，极大的拓展了 zsh 的功能<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Mac</span></span><br><span class="line">brew install zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># centos</span></span><br><span class="line">yum install zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改为zsh</span></span><br><span class="line">chsh -s `<span class="built_in">which</span> zsh`</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 oh my zsh</span></span><br><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>"</span></span><br></pre></td></tr></table></figure></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/02/20/some-cli-tools/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2018/02/19/favorite-ide-list/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/02/19/favorite-ide-list/" class="post-title-link" itemprop="url">一些常用的IDE</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-02-19 09:33:47" itemprop="dateCreated datePublished" datetime="2018-02-19T09:33:47+08:00">2018-02-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-14 00:05:26" itemprop="dateModified" datetime="2021-11-14T00:05:26+08:00">2021-11-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <hr>
<blockquote>
<p>术业有专攻,选择合适的工具做合适的事情,事半功倍<br>下面贴一贴自己常用的IDE</p>
</blockquote>
<hr>
<h1 id="Mac下最好用的终端工具-iTerm2"><a href="#Mac下最好用的终端工具-iTerm2" class="headerlink" title="Mac下最好用的终端工具-iTerm2"></a>Mac下最好用的终端工具-<a href="http://www.iterm2.com/" target="_blank" rel="noopener">iTerm2</a></h1><ul>
<li>分割窗口</li>
<li>快捷键</li>
<li>搜索</li>
<li>自动完成</li>
<li>选中复制</li>
<li>粘贴历史</li>
<li>即时重放</li>
<li>配置型强</li>
<li><a href="http://www.iterm2.com/features.html" target="_blank" rel="noopener">更多功能特性</a></li>
</ul>
<h1 id="效率神器-Alfred"><a href="#效率神器-Alfred" class="headerlink" title="效率神器 Alfred"></a>效率神器 <a href="https://www.alfredapp.com/" target="_blank" rel="noopener">Alfred</a></h1><ul>
<li>最爱剪贴板</li>
<li>史上最酸爽效率神器,用过都说好 ☺</li>
</ul>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2018/02/19/favorite-ide-list/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2017/07/02/how-to-improve-yourself/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/07/02/how-to-improve-yourself/" class="post-title-link" itemprop="url">如何提高自己的核心竞争力</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-07-02 00:14:53" itemprop="dateCreated datePublished" datetime="2017-07-02T00:14:53+08:00">2017-07-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-13 23:22:26" itemprop="dateModified" datetime="2021-11-13T23:22:26+08:00">2021-11-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="资料整理来源知乎-如何提高自己的核心竞争力"><a href="#资料整理来源知乎-如何提高自己的核心竞争力" class="headerlink" title="资料整理来源知乎 如何提高自己的核心竞争力"></a>资料整理来源知乎 <a href="https://www.zhihu.com/question/56014101" target="_blank" rel="noopener">如何提高自己的核心竞争力</a></h1><ul>
<li>能力不行就靠努力,你的努力,你的想法让你的上司知道</li>
<li>能独立的表达自己的观点,却不能不合群,缺失团队精神的没人喜欢</li>
<li>对’公司规则’,’团队统一标准’要表示服从,却不能卑躬屈膝</li>
<li>要积极地参与公司的团建活动。AA制的活动不想去，也请把钱付了。也是为自己积赞人品</li>
<li>看到能力比自己强的同事少去苛责别人嫉妒别人。看到不如自己的同事要多多帮助。默默无闻弥补你上司的短板，不要在背后说你老板的坏话。</li>
<li>学会沟通，学会合作，学会学习。对于没有什么核心竞争力的员工来说，这三样技能比工作能力更重要！</li>
<li>不要玻璃心。</li>
<li>沟通是情绪的转移，信息的转移，感情的互动。喜悦心、包容心、同理心、赞美心、爱心。</li>
<li>任何合作都是利益的合作，缺乏利益驱动的合作基本都是废话，不值得做的事情， 谁就不会去做好；那么，对于一个“没有核心竞争力”的人来说，你看中的利益应该是什么？我认为应该是：你的团队认可你！用心和他人合作比你一天到晚想着法子证明自己更重要。和他人合作，不但能取长补短，还能让你默默无闻中永远安全。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2017/04/04/svn-intercept-empty-comments/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/04/04/svn-intercept-empty-comments/" class="post-title-link" itemprop="url">svn钩子拦截空注释</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-04-04 10:37:27" itemprop="dateCreated datePublished" datetime="2017-04-04T10:37:27+08:00">2017-04-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-04-04 10:37:27" itemprop="dateModified" datetime="2018-04-04T10:37:27+08:00">2018-04-04</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote class="blockquote-center"><p>别调皮,乖乖写注释去</p>
</blockquote>
<ul>
<li>总有一些小朋友不乖,总是忘了写注释,于是用<code>svn</code>钩子拦截一些空注释</li>
</ul>
<h1 id="0x01-切换到svn服务器目录"><a href="#0x01-切换到svn服务器目录" class="headerlink" title="0x01 切换到svn服务器目录"></a>0x01 <code>切换到svn服务器目录</code></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 假定svn所在目录为 /var/svn/svnrepos</span></span><br><span class="line"><span class="built_in">cd</span> /var/svn/svnrepos/hooks</span><br></pre></td></tr></table></figure>
<h1 id="0x02-创建pre-commit"><a href="#0x02-创建pre-commit" class="headerlink" title="0x02 创建pre-commit"></a>0x02 <code>创建pre-commit</code></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建文件</span></span><br><span class="line">touch pre-commit</span><br><span class="line"><span class="comment"># 赋予执行权限</span></span><br><span class="line">chmod u+x pre-commit</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/04/04/svn-intercept-empty-comments/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2017/02/09/ssh-password-free-login/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/02/09/ssh-password-free-login/" class="post-title-link" itemprop="url">ssh免密登录Linux服务器</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-02-09 10:33:52" itemprop="dateCreated datePublished" datetime="2017-02-09T10:33:52+08:00">2017-02-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-13 23:22:26" itemprop="dateModified" datetime="2021-11-13T23:22:26+08:00">2021-11-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote class="blockquote-center"><p>身为一个懒癌晚期患者,能敲一个单词,绝不敲两下</p>
</blockquote>
<ul>
<li>重复的次数多了就该想想办法偷偷懒了,例如这货:<code>ssh</code>免密免密登录服务器,再也不用翻笔记找密码了</li>
</ul>
<h1 id="0x01-客户端创建公私钥"><a href="#0x01-客户端创建公私钥" class="headerlink" title="0x01 客户端创建公私钥"></a>0x01 <code>客户端创建公私钥</code></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen</span><br><span class="line"><span class="comment"># 按照提示输入文件名称即可,例如:devServer</span></span><br></pre></td></tr></table></figure>
<h1 id="0x02-将公钥复制服务器"><a href="#0x02-将公钥复制服务器" class="headerlink" title="0x02 将公钥复制服务器"></a>0x02 <code>将公钥复制服务器</code></h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ssh-copy-id 会将客户端公钥复制到服务器  `~/.ssh/authorized_keys`中</span></span><br><span class="line"><span class="comment"># 按照体术输入服务器用户名密码即可</span></span><br><span class="line">ssh-copy-id -i devServer.pub username@domain</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2017/02/09/ssh-password-free-login/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://jokechat.cn/2017/01/13/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="jokechat">
      <meta itemprop="description" content="技术,资讯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="jokechat">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2017/01/13/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2017-01-13 13:19:11" itemprop="dateCreated datePublished" datetime="2017-01-13T13:19:11+08:00">2017-01-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-11-13 23:22:26" itemprop="dateModified" datetime="2021-11-13T23:22:26+08:00">2021-11-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <!-- 标签 方式，要求版本在0.4.5或以上 -->
<blockquote class="blockquote-center"><p>没有瘾的生活，总是过分平常，一直过下去，就好像自己都要消失在这个世界上了。 所以我们总需要一种类似执念、迷恋、热爱或沉溺的东西，才可以在这时常令人绝望的世界里，勇敢地活下去。 我们总要沉浸某个领域，才会知道这个自己是怎样的自己，才会明白自己要的究竟是什么，才会在这个自己重新浮上来之后， 如获得了新生般有了新的眼光、新的视野，而那种上瘾的感觉将变成一个秘密，一个充满爱的秘密，于是那些艰难险阻也就再也算不上什么了……</p>
</blockquote>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">jokechat</p>
  <div class="site-description" itemprop="description">技术,资讯</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">10</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jokechat</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
